[TPC-H](http://www.tpc.org/tpch/) is a decision support benchmark. It mainly evaluates performance of projection, aggregation and join rather than updates. I've been [benchmarking PostgreSQL with TPC-H](http://wiki.postgresql.org/wiki/TPC-H). Since the database is not natively supported in TPC-H we have to tune the generated data and queries a bit to kill it off. Please refer to [my post](http://ifthiskills.me/?p=588) for the whole procedure (for Chinese readers only).

I'll introduce below what each script or patch does.

cut\_tail.sh
------------
We have to load data generated by TPC-H into Postgres but a raw row is of the following form      
c1 | c2 | c3 | ... | cn |           
Postgres could not swallow the tail '|' so we need to cut it out.

gen\_sql.sh
-----------
TPC-H generate queries from templates with the program `qgen`. I've run into errors when executing `qgen` directly or under the `queries` directory. My work-around is to copy the files under the `queries` into the upper directory and then `qgen` could go without complaints. 

The script simply does that.  

postgres.patch
--------------
Finally, not all queries from TPC-H are legal SQLs in Postgres so I've written a patch to conform the queries to Postgres grammar. 

To run the patch file:

    cp postgres.patch queries/
    cd queries
    patch -p1 < postgres.patch

To rollback:

    cd queries
    patch -R -p1 < postgres.patch

-----------------------------------------------------
I've tested the above scripts and patch on Ubuntu 12.04 and it works for me. 
